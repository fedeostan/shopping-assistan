# Shopping Assistant - Project Conventions

## Tech Stack
- **Framework:** Next.js 16 (App Router, TypeScript, Tailwind CSS v4)
- **AI:** Vercel AI SDK 6 + @ai-sdk/anthropic (Claude Sonnet default)
- **UI:** shadcn/ui + assistant-ui (chat components)
- **Database:** Supabase (PostgreSQL + pgvector)
- **Web Agent:** AgentQL (TinyFish) for cross-site scraping

## Project Structure
- `src/app/` - Next.js pages and API routes
- `src/lib/ai/` - Orchestrator agent + tool definitions
- `src/lib/persona/` - User persona engine (build, update, inject)
- `src/lib/db/` - Supabase client helpers
- `src/lib/agentql/` - AgentQL wrapper and queries
- `src/components/assistant-ui/` - Chat UI components (auto-generated by assistant-ui)
- `src/components/ui/` - shadcn/ui components
- `src/components/products/` - Product cards, comparison views
- `src/components/chat/` - Custom chat components

## Conventions
- Use `ai` SDK's `streamText` + `tool()` for agent logic
- Use `toUIMessageStreamResponse()` for streaming responses
- All user-specific tables have RLS enabled
- Server-side DB access uses `createServiceClient()` (bypasses RLS)
- Client-side DB access uses `supabase` (respects RLS)

## Commands
- `npm run dev` - Start dev server
- `npm run build` - Production build
- `npm run lint` - Run ESLint
